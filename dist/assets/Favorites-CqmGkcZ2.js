import{c as z,r,d as I,u as B,j as e,B as p}from"./index-wx0cpdQ-.js";import{I as A}from"./input-DlubX1PJ.js";import{S as D,f as R,C,d as S,e as _}from"./card-Ks5reE5D.js";import{g as H,F,r as $}from"./FavoriteButton-Dqr0ORzV.js";import{P as Q}from"./ProfileSidebar-CUX9nyIG.js";import{S as W}from"./search-C5ZZVUmr.js";import{F as q}from"./filter-Cad13wRG.js";import{P as k}from"./plus-Ci3g5hd-.js";import{H as K}from"./Combination-C0y2sNL0.js";import"./SupabaseClient-C5AFRzKB.js";import"./index-CjjoUzqA.js";import"./Logo-HzuToWv5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=z("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),n={xs:360,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function G(){const[h,c]=r.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0,isMobile:!1,isTablet:!1,isDesktop:!1,isSmallMobile:!1,orientation:"portrait"});return r.useEffect(()=>{if(typeof window>"u")return;const i=()=>{const l=window.innerWidth,o=window.innerHeight;c({width:l,height:o,isMobile:l<n.md,isTablet:l>=n.md&&l<n.lg,isDesktop:l>=n.lg,isSmallMobile:l<n.sm,orientation:o>l?"portrait":"landscape"})};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),h}function ie(){const[h,c]=r.useState([]),[i,l]=r.useState(!0),[o,M]=r.useState(""),[m,j]=r.useState("all"),[E,P]=r.useState([]),[b,u]=r.useState(!1),{toast:y}=I(),g=B(),{isMobile:f,isTablet:T}=G();r.useEffect(()=>{L()},[]);const L=async()=>{l(!0);try{const s=await H();c(s);const a=Array.from(new Set(s.map(t=>t.category_name).filter(Boolean)));P(a)}catch(s){console.error("Error fetching favorites:",s),y({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{l(!1)}},N=async s=>{await $(s)&&(c(t=>t.filter(x=>x.id!==s)),y({title:"Removed from favorites",description:"This meal has been removed from your favorites"}))},v=s=>{g(`/meal-planning?addMeal=${s}`)},d=s=>{g(`/meal/${s}`)},w=h.filter(s=>{var x;const a=(x=s.meal_name)==null?void 0:x.toLowerCase().includes(o.toLowerCase()),t=m==="all"||s.category_name===m;return a&&t});return e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx(Q,{activePage:"favorites"}),e.jsx("div",{className:"flex-1 p-3 sm:p-6 ml-0 md:ml-16 lg:ml-64",children:e.jsxs("div",{className:"container mx-auto py-2 sm:py-4 max-w-full",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 sm:mb-6 gap-3 sm:gap-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"My Favorites"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(A,{type:"text",placeholder:"Search favorites...",value:o,onChange:s=>M(s.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(p,{variant:"outline",onClick:()=>u(!b),className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:f?"sr-only":"",children:"Filter"})]}),b&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{className:`block px-4 py-2 text-sm w-full text-left ${m==="all"?"bg-primary/10 text-primary":"hover:bg-gray-100"}`,onClick:()=>{j("all"),u(!1)},children:"All Categories"}),E.map(s=>e.jsx("button",{className:`block px-4 py-2 text-sm w-full text-left ${m===s?"bg-primary/10 text-primary":"hover:bg-gray-100"}`,onClick:()=>{j(s),u(!1)},children:s},s))]})})]})]})]}),i?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(O,{className:"h-12 w-12 animate-spin text-primary"})}):w.length>0?f||T?e.jsx(D,{className:"pb-4",children:e.jsx(R,{children:w.map(s=>e.jsxs(C,{className:"overflow-hidden h-full flex flex-col hover:shadow-lg transition-shadow duration-200 min-w-[240px] sm:min-w-[280px]",children:[e.jsxs("div",{className:"relative cursor-pointer",onClick:()=>d(s.meal_id),children:[e.jsx("img",{src:s.image_url||"/placeholder-meal.jpg",alt:s.meal_name,className:"w-full h-36 sm:h-48 object-cover transition-transform duration-300 hover:scale-105",onError:a=>{const t=a.target;t.src="/placeholder-meal.jpg"}}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(F,{mealId:s.meal_id,favoriteId:s.id,className:"bg-white/80 backdrop-blur-sm shadow-sm",onToggle:a=>{a||N(s.id)}})})]}),e.jsxs(S,{className:"p-3 flex-grow cursor-pointer",onClick:()=>d(s.meal_id),children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2 line-clamp-1",children:s.meal_name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[s.category_name&&e.jsx("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded-full text-xs",children:s.category_name}),s.subcategory_name&&e.jsx("span",{className:"bg-secondary/10 text-secondary px-2 py-0.5 rounded-full text-xs",children:s.subcategory_name})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2",children:s.description||"No description available"})]}),e.jsx(_,{className:"p-3 pt-0",children:e.jsxs(p,{onClick:a=>{a.stopPropagation(),v(s.meal_id)},className:"w-full text-xs sm:text-sm py-1 sm:py-2 h-auto",size:f?"sm":"default",children:[e.jsx(k,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),"Add to Meal Plan"]})})]},s.id))})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4",children:w.map(s=>e.jsxs(C,{className:"overflow-hidden h-full flex flex-col hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"relative cursor-pointer",onClick:()=>d(s.meal_id),children:[e.jsx("img",{src:s.image_url||"/placeholder-meal.jpg",alt:s.meal_name,className:"w-full h-48 object-cover transition-transform duration-300 hover:scale-105",onError:a=>{const t=a.target;t.src="/placeholder-meal.jpg"}}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(F,{mealId:s.meal_id,favoriteId:s.id,className:"bg-white/80 backdrop-blur-sm shadow-sm",onToggle:a=>{a||N(s.id)}})})]}),e.jsxs(S,{className:"p-4 flex-grow cursor-pointer",onClick:()=>d(s.meal_id),children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s.meal_name}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[s.category_name&&e.jsx("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded-full text-xs",children:s.category_name}),s.subcategory_name&&e.jsx("span",{className:"bg-secondary/10 text-secondary px-2 py-0.5 rounded-full text-xs",children:s.subcategory_name})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description||"No description available"})]}),e.jsx(_,{className:"p-4 pt-0",children:e.jsxs(p,{onClick:a=>{a.stopPropagation(),v(s.meal_id)},className:"w-full",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Add"]})})]},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-3 mb-4",children:e.jsx(K,{className:"text-primary h-6 w-6"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No favorites yet"}),e.jsx("p",{className:"text-muted-foreground px-4",children:"Start adding meals to your favorites to see them here."}),e.jsx(p,{variant:"outline",className:"mt-4",onClick:()=>g("/meal-planning"),children:"Browse Meals"})]})]})})]})}export{ie as default};
