import{c as _,u as D,b as F,r as x,J as n,j as e,B as l,U as p,M as j}from"./index-wx0cpdQ-.js";import{g as q,P as U,R as B,B as k,b as I,e as L,h as P,i as W,j as J}from"./ProfileSidebar-CUX9nyIG.js";import{C as g,d as y}from"./card-Ks5reE5D.js";import{u as G}from"./mobile-DDjMNcjN.js";import{T as H}from"./trash-2-Cdi4lUr4.js";import{D as v}from"./dumbbell-CjF3jcuT.js";import{A as w}from"./award-DAs12a83.js";import{C as K}from"./clock-DvXeqAMP.js";import"./index-CjjoUzqA.js";import"./Combination-C0y2sNL0.js";import"./Logo-HzuToWv5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=_("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),ce=()=>{D();const{language:r}=F(),[d,u]=x.useState([]),[A,N]=x.useState(!0),[i,m]=x.useState(null),{isMobile:C,isTablet:O}=G(),a={en:{title:"Notifications",subTitle:"Manage your notifications and alerts",markAllRead:"Mark all as read",clearAll:"Clear all",noNotifications:"No notifications to display",markAsRead:"Mark as read",delete:"Delete",refresh:"Refresh",filterAll:"All",filterUnread:"Unread",filterMeal:"Meal",filterWater:"Water",filterExercise:"Exercise",filterSleep:"Sleep",filterAchievement:"Achievement",filterSystem:"System"},fr:{title:"Notifications",subTitle:"Gérez vos notifications et alertes",markAllRead:"Tout marquer comme lu",clearAll:"Tout effacer",noNotifications:"Aucune notification à afficher",markAsRead:"Marquer comme lu",delete:"Supprimer",refresh:"Actualiser",filterAll:"Tous",filterUnread:"Non lus",filterMeal:"Repas",filterWater:"Eau",filterExercise:"Exercice",filterSleep:"Sommeil",filterAchievement:"Réussite",filterSystem:"Système"}}[r];x.useEffect(()=>{h()},[i]),x.useEffect(()=>{const s=setInterval(()=>{h()},3e4);return()=>clearInterval(s)},[i]);const h=async()=>{N(!0);try{let t=[...await q(100)];i==="unread"?t=t.filter(c=>!c.is_read):i&&i!=="all"&&(t=t.filter(c=>c.type===i)),u(t)}catch(s){console.error("Error loading notifications:",s),n.error(r==="en"?"Failed to load notifications":"Échec du chargement des notifications")}finally{N(!1)}},M=async s=>{try{await L(s)&&(u(d.map(c=>c.id===s?{...c,is_read:!0}:c)),n.success(r==="en"?"Notification marked as read":"Notification marquée comme lue"))}catch(t){console.error("Error marking notification as read:",t),n.error(r==="en"?"Failed to mark notification as read":"Échec du marquage de la notification comme lue")}},S=async()=>{try{await P()&&(u(d.map(t=>({...t,is_read:!0}))),n.success(r==="en"?"All notifications marked as read":"Toutes les notifications marquées comme lues"))}catch(s){console.error("Error marking all notifications as read:",s),n.error(r==="en"?"Failed to mark all notifications as read":"Échec du marquage de toutes les notifications comme lues")}},R=async s=>{try{await W(s)&&(u(d.filter(c=>c.id!==s)),n.success(r==="en"?"Notification deleted":"Notification supprimée"))}catch(t){console.error("Error deleting notification:",t),n.error(r==="en"?"Failed to delete notification":"Échec de la suppression de la notification")}},z=async()=>{try{await J()&&(u([]),n.success(r==="en"?"All notifications cleared":"Toutes les notifications effacées"))}catch(s){console.error("Error clearing all notifications:",s),n.error(r==="en"?"Failed to clear notifications":"Échec de l'effacement des notifications")}},E=()=>{h(),n.success(r==="en"?"Notifications refreshed":"Notifications actualisées")},T=s=>{const t=new Date(s),f=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));if(f<60)return r==="en"?`${f} min ago`:`il y a ${f} min`;if(f<24*60){const o=Math.floor(f/60);return r==="en"?`${o} hour${o>1?"s":""} ago`:`il y a ${o} heure${o>1?"s":""}`}else{const o=Math.floor(f/1440);return r==="en"?`${o} day${o>1?"s":""} ago`:`il y a ${o} jour${o>1?"s":""}`}},$=s=>{switch(s){case"meal":return e.jsx(p,{className:"h-5 w-5 text-orange-500"});case"water":return e.jsx(b,{className:"h-5 w-5 text-blue-500"});case"exercise":return e.jsx(v,{className:"h-5 w-5 text-green-500"});case"sleep":return e.jsx(j,{className:"h-5 w-5 text-purple-500"});case"achievement":return e.jsx(w,{className:"h-5 w-5 text-yellow-500"});default:return e.jsx(k,{className:"h-5 w-5 text-gray-500"})}};return e.jsxs("div",{className:"flex space-y-6 bg-gray-50 dark:bg-gray-900",children:[e.jsx(U,{activePage:"notifications"}),e.jsx("div",{className:`flex-1 p-4 sm:p-6 md:p-8 ${C?"":"md:ml-64"}`,children:e.jsxs("div",{className:"grid",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:a.title}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a.subTitle})]}),e.jsxs("div",{className:"flex-1 space-x-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:E,title:a.refresh,children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),a.refresh]}),e.jsx(l,{variant:"outline",size:"sm",onClick:S,disabled:d.every(s=>s.is_read)||d.length===0,children:a.markAllRead}),e.jsxs(l,{variant:"outline",size:"sm",onClick:z,disabled:d.length===0,children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),a.clearAll]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>m("all"),className:i==="all"||i===null?"bg-primary text-primary-foreground":"",children:a.filterAll}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>m("unread"),className:i==="unread"?"bg-primary text-primary-foreground":"",children:a.filterUnread}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>m("meal"),className:i==="meal"?"bg-primary text-primary-foreground":"",children:[e.jsx(p,{className:"h-4 w-4 mr-1"}),a.filterMeal]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>m("water"),className:i==="water"?"bg-primary text-primary-foreground":"",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),a.filterWater]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>m("exercise"),className:i==="exercise"?"bg-primary text-primary-foreground":"",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),a.filterExercise]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>m("sleep"),className:i==="sleep"?"bg-primary text-primary-foreground":"",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),a.filterSleep]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>m("achievement"),className:i==="achievement"?"bg-primary text-primary-foreground":"",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),a.filterAchievement]})]}),e.jsx("div",{className:"space-y-4",children:A?e.jsx(g,{children:e.jsx(y,{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})})}):d.length===0?e.jsx(g,{children:e.jsx(y,{className:"flex justify-center items-center h-40",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a.noNotifications})]})})}):d.map(s=>e.jsx(g,{className:`transition-all ${s.is_read?"bg-gray-50 dark:bg-gray-800/50":"bg-white dark:bg-gray-800 shadow-md"}`,children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0 mr-4 mt-1 bg-gray-100 dark:bg-gray-700 rounded-full p-2",children:$(s.type)}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:`text-lg font-medium ${s.is_read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:[s.title,!s.is_read&&e.jsx(I,{className:"ml-2 bg-blue-500",variant:"secondary",children:r==="en"?"New":"Nouveau"})]}),e.jsx("p",{className:`text-sm mt-1 ${s.is_read?"text-gray-500 dark:text-gray-400":"text-gray-700 dark:text-gray-300"}`,children:s.message})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),T(s.created_at)]})]}),e.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[!s.is_read&&e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>M(s.id),children:a.markAsRead}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>R(s.id),children:a.delete})]})]})]})})},s.id))})]})})]})};export{ce as default};
