import{r as a,j as e,B as v,J as r,s as C}from"./index-wx0cpdQ-.js";import{C as b,a as S,b as w,d as _,e as I}from"./card-Ks5reE5D.js";import{I as T}from"./input-DlubX1PJ.js";import{L as t}from"./label-BLnSVJrc.js";import{C as k,S as D}from"./Confetti-EdMnZRZX.js";import{C as E}from"./checkbox-9RmuQjIw.js";import{R as F,a as R}from"./radio-group-Sl-6f1Ib.js";const $=[{id:"water",label:"Water Intake",description:"Drink more water daily"},{id:"protein",label:"Protein Goals",description:"Increase protein consumption"},{id:"vegetables",label:"Vegetable Intake",description:"Eat more vegetables"},{id:"exercise",label:"Exercise",description:"Regular physical activity"},{id:"sleep",label:"Sleep",description:"Improve sleep habits"}],M=()=>{const[n,o]=a.useState(""),[c,m]=a.useState([]),[d,h]=a.useState(7),[p,u]=a.useState(1),[x,g]=a.useState(!1),[j,f]=a.useState(!1),y=s=>{m(i=>i.includes(s)?i.filter(l=>l!==s):[...i,s])},N=async()=>{if(!n.trim()){r.error("Please provide a challenge name");return}if(c.length===0){r.error("Please select at least one challenge type");return}g(!0);try{const{data:{user:s}}=await C.auth.getUser();if(!s){r.error("You need to be signed in to create a challenge");return}const{data:i,error:l}=await C.rpc("create_nutrition_challenge",{p_user_id:s.id,p_name:n,p_types:c,p_duration_days:d,p_difficulty_level:p});if(l)throw l;r.success("Challenge created successfully!"),f(!0),setTimeout(()=>f(!1),3e3),o(""),m([]),h(7),u(1)}catch(s){console.error("Error creating challenge:",s),r.error("Failed to create challenge")}finally{g(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{active:j}),e.jsxs(b,{children:[e.jsx(S,{children:e.jsx(w,{children:"Create a Nutrition Challenge"})}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"challenge-name",children:"Challenge Name"}),e.jsx(T,{id:"challenge-name",placeholder:"My Awesome Challenge",value:n,onChange:s=>o(s.target.value)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(t,{children:"Challenge Types"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:$.map(s=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(E,{id:`type-${s.id}`,checked:c.includes(s.id),onCheckedChange:()=>y(s.id)}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsx(t,{htmlFor:`type-${s.id}`,className:"text-sm font-medium",children:s.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]},s.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(t,{children:"Duration (Days)"}),e.jsx("span",{className:"text-sm font-medium",children:d})]}),e.jsx(D,{value:[d],min:3,max:30,step:1,onValueChange:s=>h(s[0])})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Difficulty Level"}),e.jsx(F,{value:String(p),onValueChange:s=>u(parseInt(s)),className:"flex space-x-6 pt-2",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{value:String(s),id:`difficulty-${s}`}),e.jsx(t,{htmlFor:`difficulty-${s}`,children:s===1?"Easy":s===2?"Medium":"Hard"})]},s))})]})]})]}),e.jsx(I,{children:e.jsx(v,{onClick:N,disabled:x,className:"w-full",children:x?"Creating...":"Create Challenge"})})]})]})};export{M as C};
